{% load static %}

<script type="module">
    import { getUserName } from "{% static 'js/utils.js' %}";
    getUserName();
</script>

<title>Pong Tournament Lobby</title>

<link rel="stylesheet" href="{% static 'css/styles.css' %}">
<link rel="stylesheet" href="{% static 'css/tournament.css' %}">

<body>
    <div class="container">
        <div class="tournament-card">
            <div class="tournament-header">
                <h1>Tournament Lobby</h1>
                <span id="tournament-status" class="tournament-status status-waiting">WAITING</span>
            </div>

            <div class="tournament-info">
                <p><strong>Tournament Name:</strong> <span id="tournament-name">Loading...</span></p>
                <p><strong>Created by:</strong> <span id="tournament-creator">Loading...</span></p>
                <p><strong>Participants:</strong> <span id="tournament-participants">0/8</span></p>
                <p><strong>ID:</strong> <span id="tournament-id">Loading...</span></p>
            </div>

            <h2>Participants</h2>
            <div class="participants-list" id="participants-list">
                <!-- Participant items will be added here by JavaScript -->
                <p class="no-rooms-message" id="no-participants-message">No participants have joined yet.</p>
            </div>

            <div class="matches-container" id="matches-container">
                <h2>Matches</h2>
                <p class="no-rooms-message" id="no-matches-message">No matches scheduled yet.</p>
                <!-- Match items will be added here by JavaScript -->
            </div>

            <div class="action-buttons">
                <button id="back-btn" class="action-btn secondary">Back to Lobby</button>
                <button id="join-btn" class="action-btn join">Join Tournament</button>
                <button id="reset-btn" class="action-btn reset">Reset Database</button>
            </div>

            <p class="refresh-info">Refreshing automatically every 5 seconds...</p>
        </div>
    </div>

    <!-- Participant template (for cloning) - Hidden -->
    <template id="participant-template">
        <div class="participant-item">
            <div class="participant-info">
                <div class="participant-name"></div>
            </div>
            <div class="participant-stats">
                <div class="stat">
                    <div class="stat-value matches-played">0</div>
                    <div class="stat-label">Played</div>
                </div>
                <div class="stat">
                    <div class="stat-value wins">0</div>
                    <div class="stat-label">Wins</div>
                </div>
                <div class="stat">
                    <div class="stat-value losses">0</div>
                    <div class="stat-label">Losses</div>
                </div>
                <div class="stat">
                    <div class="stat-value points">0</div>
                    <div class="stat-label">Points</div>
                </div>
            </div>
        </div>
    </template>

    <!-- Match template (for cloning) - Hidden -->
    <template id="match-template">
        <div class="match-item">
            <div class="match-players">
                <span class="player1"></span>
                <span class="match-vs">vs</span>
                <span class="player2"></span>
            </div>
            <span class="match-status"></span>
        </div>
    </template>

	<script type="module" src="{% static 'js/tournament.js' %}"></script>
</body>
</html>